$(document).ready(function (){
    const pageCount = 8; // pageCount 총 페이지의 수
    const toNextScroll = 365; // toNextScroll 다음 페이지로 넘어가기 위한 스크롤 입력 값
    $('body').css({'height':toNextScroll*pageCount*30});
    $(window).scrollTop(toNextScroll*pageCount*10);
    setTimeout (() => {
        $('#roundboard').css({'transition':'all 1s ease-in-out'});
        $('#roundboard>div').css({'transition':'all 0.3s ease-in-out 0.35s'});
    }, 500);

    const navbtn_int = document.querySelector('.navbtn_int');
    const navbtn_pub = document.querySelector('.navbtn_pub');
    const navbtn_dsi = document.querySelector('.navbtn_dsi');
    const navbtn_prf = document.querySelector('.navbtn_prf');
    navbtn_int.onclick = () => {
        $(window).scrollTop(toNextScroll*pageCount*20);
    };
    navbtn_pub.onclick = () => {
        $(window).scrollTop(toNextScroll*((pageCount*20)+1));
    };
    navbtn_dsi.onclick = () => {
        $(window).scrollTop(toNextScroll*((pageCount*20)+6));
    };
    navbtn_prf.onclick = () => {
        $(window).scrollTop(toNextScroll*((pageCount*20)+7));
    };

    $(window).on("scroll", function(){
        var sctop = $(this).scrollTop();
        if (sctop <= 1 || sctop >= toNextScroll*pageCount*30-3333){
            $(window).scrollTop(toNextScroll*pageCount*12);
        };
        // console.log('sctop:'+sctop);
        for (let i = 0; i < pageCount*30; i++) {
            if (sctop >= i*toNextScroll && sctop < (i+1)*toNextScroll){
                $('#roundboard').css({'transform':'translate(calc(-100% + 960px), calc(-50%)) rotate('+((i*45)*(-1))+'deg)'})
                $('.no_1').css({'transform':'translate(-50%, -50%) rotate('+(i*45)+'deg)'})
                $('.no_2').css({'transform':'translate(50%, -50%) rotate('+(i*45)+'deg)'})
                $('.no_3').css({'transform':'translate(-50%, -50%) rotate('+(i*45)+'deg)'})
                $('.no_4').css({'transform':'translate(50%, 50%) rotate('+(i*45)+'deg)'})
                $('.no_5').css({'transform':'translate(-50%, -50%) rotate('+(i*45)+'deg)'})
                $('.no_6').css({'transform':'translate(-50%, 50%) rotate('+(i*45)+'deg)'})
                $('.no_7').css({'transform':'translate(-50%, -50%) rotate('+(i*45)+'deg)'})
                $('.no_8').css({'transform':'translate(-50%, -50%) rotate('+(i*45)+'deg)'})
                // console.log('i= '+i);
            };
            if (sctop >= i*(toNextScroll*pageCount) && sctop < i*(toNextScroll*pageCount)+toNextScroll) {
                var page1Num = (88888+(3+((pageCount-8)*i)))%8
                if (page1Num == 0){page1Num = 8};
                // console.log('page1num= '+page1Num);
                $('.no_'+page1Num+'>.intro').show().siblings().hide();
                $('body').css({'background':'#fff'})

                $('nav').stop().fadeOut(300);
                $('.navbtn_int').addClass('opa1').removeClass('opa05').parent().siblings().find('a').removeClass('opa1').addClass('opa05');
                
                // $('#roundboard>div>.intro').removeAttr('id', 'intro');
                // $('.no_'+page1Num+'>.intro').attr('id', 'intro');
            };
            if (sctop >= i*(toNextScroll*pageCount)+toNextScroll && sctop < i*(toNextScroll*pageCount)+toNextScroll*2) {
                var page2Num = (88888+(4+((pageCount-8)*i)))%8
                if (page2Num == 0){page2Num = 8};
                // console.log('page2num= '+page2Num);
                $('.no_'+page2Num+'>.page2').show().siblings().hide();
                $('body').css({'background':'#FEB203'})
                // $('body').css({'background':'#DE90D6'})

                $('nav').stop().fadeIn(1000);
                $('.navbtn_pub').addClass('opa1').removeClass('opa05').parent().siblings().find('a').removeClass('opa1').addClass('opa05');
            };
            if (sctop >= i*(toNextScroll*pageCount)+toNextScroll*2 && sctop < i*(toNextScroll*pageCount)+toNextScroll*3) {
                var page3Num = (88888+(5+((pageCount-8)*i)))%8
                if (page3Num == 0){page3Num = 8};
                // console.log('page3num= '+page3Num);
                $('.no_'+page3Num+'>.page3').show().siblings().hide();
                $('body').css({'background':'#92d5e6'})

                $('nav').stop().fadeIn(1000);
                $('.navbtn_pub').addClass('opa1').removeClass('opa05').parent().siblings().find('a').removeClass('opa1').addClass('opa05');
            };
            if (sctop >= i*(toNextScroll*pageCount)+toNextScroll*3 && sctop < i*(toNextScroll*pageCount)+toNextScroll*4) {
                var page4Num = (88888+(6+((pageCount-8)*i)))%8
                if (page4Num == 0){page4Num = 8};
                // console.log('page4num= '+page4Num);
                $('.no_'+page4Num+'>.page4').show().siblings().hide();
                $('body').css({'background':'#DAC3A3'})

                $('nav').stop().fadeIn(1000);
                $('.navbtn_pub').addClass('opa1').removeClass('opa05').parent().siblings().find('a').removeClass('opa1').addClass('opa05');
            };
            if (sctop >= i*(toNextScroll*pageCount)+toNextScroll*4 && sctop < i*(toNextScroll*pageCount)+toNextScroll*5) {
                var page5Num = (88888+(7+((pageCount-8)*i)))%8
                if (page5Num == 0){page5Num = 8};
                // console.log('page5num= '+page5Num);
                $('.no_'+page5Num+'>.page5').show().siblings().hide();
                $('body').css({'background':'#E0F4FF'})

                $('nav').stop().fadeIn(1000);
                $('.navbtn_pub').addClass('opa1').removeClass('opa05').parent().siblings().find('a').removeClass('opa1').addClass('opa05');
            };
            if (sctop >= i*(toNextScroll*pageCount)+toNextScroll*5 && sctop < i*(toNextScroll*pageCount)+toNextScroll*6) {
                var page6Num = (88888+(8+((pageCount-8)*i)))%8
                if (page6Num == 0){page6Num = 8};
                // console.log('page6num= '+page6Num);
                $('.no_'+page6Num+'>.page6').show().siblings().hide();
                $('body').css({'background':'#F3E8DC'});

                $('nav').stop().fadeIn(1000);
                $('.navbtn_pub').addClass('opa1').removeClass('opa05').parent().siblings().find('a').removeClass('opa1').addClass('opa05');
            };
            if (sctop >= i*(toNextScroll*pageCount)+toNextScroll*6 && sctop < i*(toNextScroll*pageCount)+toNextScroll*7) {
                var page7Num = (88888+(1+((pageCount-8)*i)))%8
                if (page7Num == 0){page7Num = 8};
                // console.log('page7num= '+page7Num);
                $('.no_'+page7Num+'>.page7').show().siblings().hide();
                $('body').css({'background':'#DE90D6'});

                $('nav').stop().fadeIn(1000);
                $('.navbtn_dsi').addClass('opa1').removeClass('opa05').parent().siblings().find('a').removeClass('opa1').addClass('opa05');
            };
            if (sctop >= i*(toNextScroll*pageCount)+toNextScroll*7 && sctop < i*(toNextScroll*pageCount)+toNextScroll*8) {
                var page8Num = (88888+(2+((pageCount-8)*i)))%8
                if (page8Num == 0){page8Num = 8};
                // console.log('page7num= '+page7Num);
                $('.no_'+page8Num+'>.page8').show().siblings().hide();
                $('body').css({'background':'#fdfdfd'})
                
                $('nav').stop().fadeOut(300);
                $('.navbtn_prf').addClass('opa1').removeClass('opa05').parent().siblings().find('a').removeClass('opa1').addClass('opa05');

                setTimeout(() => {
                    $('.border').css({'background-color':'#d1d1d1'})
                }, 700);
                skillsLevel();
            } else {
                $('.border').css({'background-color':'#d1d1d100'});
            };
        };
    });

    $(".PUBImage").on("mouseenter", function(){
        let imgH=$(this).find("img").height();
        let caseH=$(this).height();
        $(this).find("img").css({
            top: - (imgH-caseH)
        });
    });
    $(".PUBImage").on("mouseleave", function(){
        $(this).find("img").css({
            top:0
        });
    });

    var swiper = new Swiper('.workswiper', {
        centeredSlides: true,
        slidesPerView: 3,
        spaceBetween : 40,
        speed : 500,
        loop: true,
        mousewheel: true,

        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
    });
    $('.turnImg').hover(function(){
        $(this).find('img').css({'transform':'rotateY('+ 720 + 'deg' +')'});
        setTimeout(() => {
            $(this).find('img').attr('src','images/leaflet_page02.jpg')
        }, 275);
    },function(){
        $(this).find('img').css({'transform':'rotateY('+ 0 + 'deg' +')'});
        setTimeout(() => {
            $(this).find('img').attr('src','images/leaflet_page01.jpg')
        }, 275);
    });

    function skillsLevel (){
        for (let k = 1 ; k <=7 ; k++){
            var n;
            $('.skillIcon:nth-of-type('+k+')').hover(function(){
                k === 1 ? n=17 : false ;
                k === 2 ? n=19 : false ;
                k === 3 ? n=17 : false ;
                k === 4 ? n=18 : false ;
                k === 5 ? n=16 : false ;
                k === 6 ? n=15 : false ;
                k === 7 ? n=15 : false ;
                for(let i = 0; i <= n; i++){
                    setTimeout(function(){
                        $('.skillIcon:nth-of-type('+k+') .rotateScore').css({'background':'conic-gradient(#333 '+i*5+'%, #fff0 '+i*5+'%)'});
                    }, i * 30);
                };
            },function(){
                k === 1 ? n=17 : false ;
                k === 2 ? n=19 : false ;
                k === 3 ? n=18 : false ;
                k === 4 ? n=16 : false ;
                k === 5 ? n=17 : false ;
                k === 6 ? n=16 : false ;
                k === 7 ? n=17 : false ;
                $('.skillIcon:nth-of-type('+k+')').css({'pointer-events':'none'});
                setTimeout(function(){
                    for(let i = 0; i <= n; i++){
                        setTimeout(function(){
                            $('.skillIcon:nth-of-type('+k+') .rotateScore').css({'background':'conic-gradient(#333 '+ (n-i)*5+'%, #fff0 '+ (n-i)*5+'%)'});
                        }, i * 30);
                    };
                },2000);
                setTimeout(function(){
                    $('.skillIcon:nth-of-type('+k+')').css({'pointer-events':'all'});
                },3000);
            });
        };
    };
});